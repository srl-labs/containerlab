name: bng01

topology:
  nodes:
    bng1:
      kind: codelaboratory_bng
      image: ghcr.io/codelaboratoryltd/bng:latest
      startup-config: bng1/config.yaml
      exec:
        - ip addr add 10.0.1.1/24 dev eth1
        - ip addr add 10.0.0.1/24 dev eth2
    corerouter1:
      kind: linux
      image: frrouting/frr:v8.4.1
      binds:
        - corerouter1/daemons:/etc/frr/daemons
        - corerouter1/frr.conf:/etc/frr/frr.conf
    subscribers:
      kind: linux
      image: veesixnetworks/bngblaster:0.9.30
      binds:
        - subscribers/config.json:/config/config.json
        - subscribers/qinq.json:/config/qinq.json

  links:
    - endpoints: ["subscribers:eth1", "bng1:eth1"]
    - endpoints: ["bng1:eth2", "corerouter1:eth1"]
